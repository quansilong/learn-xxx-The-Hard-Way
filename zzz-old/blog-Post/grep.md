---
title: 文本过滤命令 grep 与正则表达式基础
date: 2018-04-14 18:09:19
tags: 
- Linux
- Shell
- bash
- grep
- Regular_Expression
categories:
- Liunx运维
- 系统管理
---


###   grep 命令


#### 作用：

> 根据模式搜索文本，并将符合模式的文本显示出来


####  选项：

> --color  ： 颜色输出

> -i       :  不区分大小写输出

> -v       :  显示没有匹配到的字符串

> -o       :  只显示被匹配到的字符串

> -E(=egrep) : 使用扩展正则表达式进行匹配（grep 默认使用基本正则表达式进行匹配）

> -F(=fgrep) : 不使用正则表达式，直接使用原字符串进行匹配


---



###   正则表达式

#### 基本正则表达式：

> 元字符

字符 | 意义
---  |---
.    | 任意单个字符
[ ]  | 范围内的字符
[^ ] | 范围外的字符

> 次数匹配（默认贪婪模式）


字符 | 意义
---  |---
*    | 其前面的字符出现任意次【0,1,....】
\\\?   | 其前面的字符出现一次或零次【0,1】
\\\{m,n\\\}| 其前面的字符出现m-n次【m,m+1,...n-1,n】

> 位置锚定

字符 | 意义
---  |---
^    | 锚定行首，此字符之后的字符串必须位于行首
$    | 锚定行尾，此字符之前的字符串必须位于行尾
^$   | 锚定空白行符
\\\<(=\b)  | 锚定词首
\\\>(=\b)  | 锚定词尾

> 分组

字 符 | 意义
---    |---
   \ \(  \ \)    | 视作为一个整体
  \\1    | 引用第一个左括号以及与之对应的右括号所包括的所有内容
\\2    | 
...|


#### 扩展正则表达式：

> 元字符（==同基本==）

字符 | 意义
---  |---
.    | 任意单个字符
[ ]  | 范围内的字符
[^ ] | 范围外的字符

> 次数匹配（默认贪婪模式）


字符 | 意义
---  |---
*    | 其前面的字符出现任意次【0,1,...】
?    | 其前面的字符出现一次或零次【0,1】
+    | 其前面的字符出现一次或多次【1,...】
{m,n}| 其前面的字符出现m-n次【m,m+1,...n-1,n】

> 位置锚定

字符 | 意义
---  |---
^    | 锚定行首，此字符之后的字符串必须位于行首
$    | 锚定行尾，此字符之前的字符串必须位于行尾
^$   | 锚定空白行符
\\\<(=\b)  | 锚定词首
\\\>(=\b)  | 锚定词尾

> 分组

字 符 | 意义
---    |---
()     | 视作为一个整体
\\1    | 引用第一个左括号以及与之对应的右括号所包括的所有内容
\\2    | 
...|

> 或者

字 符 | 意义
---    |---
|     | 或者




###  ☆实例命令或脚本

#### 显示/proc/meminfo文件中以不区分大小的s开头的行；


```sh
grep -i '^s' /proc/meminfo

grep '^[sS]' /proc/meminfo
```


#### 显示/etc/passwd中以nologin结尾的行;


```sh
grep 'nologin$' /etc/passwd
```

#### 显示/etc/inittab中以#开头，且后面跟一个或多个空白字符，而后又跟了任意非空白字符的行；


```sh
grep '^#[[:space:]]\{1,\}[^[:space:]]*' /etc/inittab
```

#### 显示/etc/inittab中包含了:一个数字:(即两个冒号中间一个数字)的行；


```sh
grep ':[0-9]:' /etc/inittab
```

#### 显示/boot/grub/grub.conf文件中以一个或多个空白字符开头的行；


```sh
grep '^[[:space:]]\{1,\}' /boot/grub/grub.conf
```

#### 显示/etc/inittab文件中以一个数字开头并以一个与开头数字相同的数字结尾的行；


```sh
grep '^\([0-9]\).*\1$' /etc/inittab
```





